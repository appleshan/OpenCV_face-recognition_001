#+TITLE: 简单的人脸识别

* 开发环境的配置

** 1. 安装 Anaconda

 - Windows
官网下载地址 https://www.anaconda.com/download/
选择相应的 Anaconda 进行安装(可能会很慢）

win10 64 位系统选择安装的是 Anaconda3-2020.11-Windows-x86_64.exe 这个版本。
下载好了安装包，就像安装普通软件一样，安装就行。一路点下去，在 Advanced Option 界面时，如果你电脑
里面没有其他版本 Python 就两个都选了。

安装完了可以测试一下，打开 cmd，输入 conda --version

 - Linux
使用 Linux 发行版的包管理器安装，例如在 Arch Linux ：
#+BEGIN_SRC sh
yay -S miniconda3
sudo ln -s /opt/miniconda3/etc/profile.d/conda.sh /etc/profile.d/conda.sh
#+END_SRC

配置 conda
修改 ~/.condarc
#+BEGIN_EXAMPLE
channels:
  - defaults
show_channel_urls: true
default_channels:
  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/main
  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/r
  - https://mirrors.bfsu.edu.cn/anaconda/pkgs/msys2
custom_channels:
  conda-forge: https://mirrors.bfsu.edu.cn/anaconda/cloud
  msys2: https://mirrors.bfsu.edu.cn/anaconda/cloud
  bioconda: https://mirrors.bfsu.edu.cn/anaconda/cloud
  menpo: https://mirrors.bfsu.edu.cn/anaconda/cloud
  pytorch: https://mirrors.bfsu.edu.cn/anaconda/cloud
  simpleitk: https://mirrors.bfsu.edu.cn/anaconda/cloud
#+END_EXAMPLE

配置 pip
修改 ~/.config/pip/pip.conf
#+BEGIN_EXAMPLE
[global]
index-url = https://mirrors.aliyun.com/pypi/simple/

[install]
trusted-host=mirrors.aliyun.com
#+END_EXAMPLE

** 2. 安装 Pycharm
首先去 Pycharm 官网，或者直接输入网址：
http://www.jetbrains.com/pycharm/download/#section=windows ，
下载 PyCharm 安装包，根据自己电脑的操作系统进行选择，对于 windows 系统选择下图的框框所包含的安装包。
这个也可以从网上找很多，而且安装很成功，个人学习的话，建议安装免费版本。

** 3. Python 环境配置
打开 Pycharm，随便先创建一个工程或者.py 文件。
点击 File→Setting，打开界面在这个选择你刚才安装的 anconda，具体可以找找教程。
[[file:./Pycharm-Project-Interpreter.png]]

同时你可以在箭头 2 的位置添加我们这个项目的第三方库。
你需要到的依赖库主要有：

 - python3.7.1
 - tensorflow 2.1.0（文章中 1.13.1）
 - keras 2.3.1（文章中 2.2.4）
 - scikit-learn 0.20.3
 - numpy（这个随便）
 - opecv-python 4.1.0.25

安装方法：
注意：tensorflow 与 tensorflow-gpu 二选一。
#+BEGIN_SRC sh
conda create –n face-recognition python=3.7

conda activate face-recognition

# 一定要用 conda 安装 TensorFlow 包 @See https://zhuanlan.zhihu.com/p/46579831
# 安装 CPU 版本的 TensorFlow
conda install tensorflow=2.1.0
# 安装 GPU 加速版本的 TensorFlow
# GPU 支持所需的 CUDA 和 CuDNN 库会自动安装成功，NVIDIA 驱动程序都必须单独安装
conda install tensorflow-gpu=2.1.0

conda install keras=2.3.1
conda install scikit-learn=0.20.3

pip3 install opencv-python==4.1.0.25
#+END_SRC

* Run

** gain_face(获取人的脸部信息，并保存到所属文件夹)
gain_face.py

** face_train(人脸特征训练，并保存CNN网络模型到文件)
face_train.py

** face_recognition(循环检测识别人脸)
face_recognition.py

[[https://github.com/appleshan/org-notes/blob/master/develop/OpenCV/Python%2BTensorflow%2BOpencv%E7%9A%84%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB.org][Python+Tensorflow+Opencv的人脸识别]]
